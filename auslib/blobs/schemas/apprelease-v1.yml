---
  title: App Release Blob (V1)
  type: object
  required:
    - name
    - schema_version
    - hashFunction
  additionalProperties: false
  properties:
    name:
      type: string
      description: Human readable identifier
      minLength: 1
      maxLength: 100
    product:
      type: string
      description: The product that the blob is associated to
      minLength: 1
      maxLength: 100
    schema_version:
      type: number
      description: Blob identifier number
      enum:
        - 1
    hashFunction:
      type: string
      description: Hash function of files pointed at (returned in responses generated by this Blob
    extv:
      type: string
    appv:
      type: string
    detailsUrl:
      type: string
      description: An URL string to a web page with more information about this release. %LOCALE% may be used, which will be substituted with the locale of the update request.
    licenseUrl:
      type: string
      description: An URL string to a web page with additional license terms that need to be accepted before the update can be installed. Generally not used anymore.
    fakePartials:
      type: boolean
      description: Not used for real updates, only for snippets.
    oldVersionSpecialCases:
      type: boolean
      description: When true, enables special version overrides to support some older versions of Firefox. Full details can be found in Mozilla bugs 998721 and 1174605.
    fileUrls:
      type: object
      description: Key/value pairs where the key is the name of an update channel, and the value is the URL for that channel. %LOCALE% will be substitued with the locale of the update request. %OS_FTP% and %OS_BOUNCER% will be substitude with values from the "platforms" block corresponding to the update request. %FILENAME% and %PRODUCT% will be replaced based on the values looked up in the ftpFilenames and bouncerProducts blocks respectively.
      additionalProperties: false
      patternProperties:
        ^.*$:
          type: string
          format: uri
    ftpFilenames:
      type: object
      description: Key/values pairs where the key is an update type ("complete" or "partial") and the value is a filename as formatted for FTP for that update type.
      additionalProperties: false
      patternProperties:
        ^(partial|complete)$:
          type: string
    bouncerProducts:
      type: object
      description: Key/values pairs where the key is an update type ("complete" or "partial") and the value is the Bouncer product to use in the full URL for that update type.
      additionalProperties: false
      patternProperties:
        ^(partial|complete)$:
          type: string
    platforms:
      type: object
      description: Key/value pairs where the key is a platform name (aka Build Target) and the values are the platform specific details.
      additionalProperties: false
      patternProperties:
        ^.+$:
          oneOf:
            -
              type: object
              required:
                - alias
              properties:
                alias:
                  type: string
                  description: Platform to look for file details in instead of this one. Must match another existing platform name.
            -
              type: object
              additionalProperties: false
              properties:
                buildID:
                  oneOf:
                    -
                      type: string
                      description: The buildID to serve for this platform"s updates. Overridden by buildID at the locale level if present.
                      pattern: ^[0-9]*$
                    -
                      type: number
                      description: The buildID to serve for this platform"s updates. Overridden by buildID at the locale level if present.
                      pattern: ^[0-9]*$
                OS_BOUNCER:
                  type: string
                  description: The value to use when substituing %OS_BOUNCER% in file URLs. See top-level fileUrls for additional detail.
                OS_FTP:
                  type: string
                  description: The value to use when substituing %OS_FTP% in file URLs. See top-level fileUrls for additional detail.
                locales:
                  type: object
                  description: Key/value pairs where the key a locale name and the values are locale specific details.
                  additionalProperties: false
                  patternProperties:
                    ^.+$:
                      type: object
                      additionalProperties: false
                      properties:
                        buildID:
                          oneOf:
                            -
                              type: string
                              description: The buildID to serve for this locale"s updates. Overrides the platform-level buildID
                              pattern: ^[0-9]*$
                            -
                              type: number
                              description: The buildID to serve for this locale"s updates. Overrides the platform-level buildID
                        extv:
                          type: string
                        appv:
                          type: string
                        partial:
                          type: object
                          description: Metadata for the partial update
                          required:
                            - filesize
                            - from
                            - hashValue
                          additionalProperties: false
                          properties:
                            filesize:
                              oneOf:
                                -
                                  type: number
                                  description: The filesize of this partial update
                                -
                                  type: string
                                  description: The filesize of this partial update
                                  pattern: ^[0-9]*$
                            from:
                              type: string
                              description: The release this partial update can be applied to. Should match another release in Balrog"s database.
                            hashValue:
                              type: string
                              description: The hash value of this partial update, calculated using the hashFunction specified at the top level.
                            fileUrl:
                              type: string
                              description: The URL to this partial update. If specified, overrides anything set in the top level fileUrls.
                              format: uri
                        complete:
                          type: object
                          required:
                            - filesize
                            - from
                            - hashValue
                          additionalProperties: false
                          properties:
                            filesize:
                              oneOf:
                                -
                                  type: number
                                  description: The filesize of this complete update
                                -
                                  type: string
                                  description: The filesize of this complete update
                                  pattern: ^[0-9]*$
                            from:
                              type: string
                              description: Should always be "*" for complete updates, because they can be applied to any previous version.
                              enum:
                                - "*"
                            hashValue:
                              type: string
                              description: The hash value of this complete update, calculated using the hashFunction specified at the top level.
                            fileUrl:
                              type: string
                              description: The URL to this complete update. If specified, overrides anything set in the top level fileUrls.
                              format: uri

